import 'colors';

// callback for testing
export default function statsLogger(err, stats, cb = console.log) {
	if (err) {
		throw new Error(err.message.red.bgBlack)
	}

	const time = new Date().toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, '$1')
	const prompt = `[${time.gray}] [${'webpack'.yellow}]`

	const durations = stats.endTime - stats.startTime
	const formatedDurations = durations >= 1000 ? `${durations / 1000} s` : `${durations} ms`
	const message = `Completed in ${formatedDurations.magenta}`

	cb(`${prompt} ${message}`)
}
