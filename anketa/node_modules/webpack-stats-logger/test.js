require('chai').should()
import statsLogger from './index'

describe('statsLogger', () => {
	it('should throw err if it is passed', () => {
		(() => statsLogger({ message: 'Test error message' })).should.throw('Test error message')
	})

	it('should count time in miliseconds correctly', () => {
		const stats = {
			endTime: 10,
			startTime: 0,
		}
		statsLogger(null, stats, result => {
			const expected = '] [webpack] Completed in 10 ms'.stripColors
			const resultWithoutTimeAndColors = result.slice(14).stripColors
			resultWithoutTimeAndColors.should.be.equal(expected)
		})
	})

	it('should count time in seconds correctly', () => {
		const stats = {
			endTime: 1000,
			startTime: 0,
		}
		statsLogger(null, stats, result => {
			const expected = '] [webpack] Completed in 1 s'.stripColors
			const resultWithoutTimeAndColors = result.slice(14).stripColors
			resultWithoutTimeAndColors.should.be.equal(expected)
		})
	})
})
